<html>
<% layout('layout/boilerplate') %>
<head>
    <link rel="stylesheet" href="/stylesheet/sendEmailForm.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<body>
    <div class="send-form">
<form action="/send-email" method="POST"  enctype="multipart/form-data">
    <h2>New Message</h2>
    <label for="toName">To Name:</label>
    <input type="text" id="toName" name="toName" required>

    <label for="toEmail">Email:</label>
    <input type="email" id="toEmail" name="toEmail" required>
    
    <label for="subject">Subject:</label>
    <input type="text" id="subject" name="subject" required>
    
    <label for="body">Body: </label>
    <textarea id="body" name="body" required></textarea>
    <div class="image-upload">
    <label for="attachment">
        <img src="/Images/attach_file_24dp_000000_FILL0_wght400_GRAD0_opsz24.png"/>
    </label>
            <input type="file" id="attachment" name="attachments" multiple> 
            <span class="material-symbols-outlined icon">
                </span>
                <a href="/schedule-email" class="icon-tooltip">
                    <img src="/Images/schedule.png" class="schedule">
                    <span class="tooltiptext">Schedule Email</span>
                </a>
                <button class="submit-btn" type="submit">Send Email</button>
   </div>
    

   
</form>
</div>

<script>
    // Function to get URL query parameters
    function getQueryParams() {
      const params = new URLSearchParams(window.location.search);
      return {
        searchTerm: params.get('searchTerm'),
        searchContent: params.get('searchContent')
      };
    }
  
    // Populate form with query parameters
    function populateForm() {
      const { searchTerm, searchContent } = getQueryParams();
      const formBody = document.getElementById('body');
      if (searchTerm && searchContent) {
        formBody.value = `${searchContent}`;
      }
    }
  
    // Run the function when the page loads
    document.addEventListener('DOMContentLoaded', populateForm);
  </script>
  
</body>
</html>