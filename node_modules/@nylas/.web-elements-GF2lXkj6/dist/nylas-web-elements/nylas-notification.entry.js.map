{"file":"nylas-notification.entry.esm.js","mappings":"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","names":[],"sources":["src/components/scheduler/nylas-notification/nylas-notification.scss?tag=nylas-notification&encapsulation=shadow","src/components/scheduler/nylas-notification/nylas-notification.tsx"],"sourcesContent":["@import '../../../common/styles/variables.scss';\n\n:host {\n  display: block;\n  margin-bottom: -12px; // offset for the rounded border\n  width: 100%;\n  z-index: 1;\n  @include default-css-variables;\n}\n.notif {\n  display: flex;\n  @media #{$mobile} {\n    width: auto;\n  }\n  padding: 17px;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 16px;\n  border-radius: var(--nylas-border-radius-2x);\n  border: 1.5px solid var(--nylas-error);\n  background: var(--nylas-base-0);\n  .content {\n    display: flex;\n    flex-direction: row;\n    gap: 8px;\n    .message {\n      font-size: 14px;\n      font-weight: 400;\n      color: var(--nylas-base-800);\n      .title {\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--nylas-base-950);\n        display: block;\n      }\n      .description {\n        font-size: 14px;\n        font-weight: 400;\n        color: var(--nylas-base-800);\n        display: block;\n      }\n    }\n    .icon {\n      &.error {\n        color: var(--nylas-error);\n      }\n    }\n  }\n\n  &.error {\n    border-color: var(--nylas-error);\n    background: rgba(255, 248, 248, 1);\n  }\n  &.warning {\n    border-color: var(--nylas-warning);\n  }\n  &.info {\n    border-color: var(--nylas-info);\n  }\n  &.success {\n    border-color: var(--nylas-success);\n  }\n\n  .dismiss-btn {\n    background: none;\n    border: none;\n    color: var(--nylas-base-950);\n    cursor: pointer;\n  }\n}\n","import { Notification } from '@nylas/core';\nimport { Component, Fragment, Host, Listen, Prop, State, h } from '@stencil/core';\nimport { debug } from '@/utils/utils';\nimport { Element } from '@stencil/core';\n\n/**\n * The `nylas-notification` component is a UI component that displays notifications.\n */\n@Component({\n  tag: 'nylas-notification',\n  styleUrl: 'nylas-notification.scss',\n  shadow: true,\n})\nexport class NylasNotification {\n  @Element() host!: HTMLElement;\n\n  /**\n   * The time-to-live for notifications in milliseconds. Set to 'none' to disable auto-dismissal.\n   */\n  @Prop() ttl: number | 'none' = 5000;\n  @Prop() allowedCategories: string[] = ['component', 'api', 'validation', 'invalid_session'];\n  @State() notifications: Notification[] = [];\n\n  @Listen('nylasSchedulerError', { target: 'body' })\n  onError(event: CustomEvent<{ notification: Notification; host: HTMLElement }>) {\n    debug(`[nylas-notification] Error: ${event.detail.notification.title}`);\n    this.handleNotification(event);\n  }\n\n  @Listen('nylasSchedulerWarning', { target: 'body' })\n  onWarning(event: CustomEvent<{ notification: Notification; host: HTMLElement }>) {\n    debug(`[nylas-notification] Warning: ${event.detail.notification.title}`);\n    this.handleNotification(event);\n  }\n\n  @Listen('nylasSchedulerInfo', { target: 'body' })\n  onInfo(event: CustomEvent<{ notification: Notification; host: HTMLElement }>) {\n    debug(`[nylas-notification] Info: ${event.detail.notification.title}`);\n    this.handleNotification(event);\n  }\n\n  @Listen('nylasSchedulerSuccess', { target: 'body' })\n  onSuccess(event: CustomEvent<{ notification: Notification; host: HTMLElement }>) {\n    debug(`[nylas-notification] Success: ${event.detail.notification.title}`);\n    this.handleNotification(event);\n  }\n\n  isChildOf(parentHost: HTMLElement): boolean {\n    let parent = this.host.parentNode;\n\n    while (parent) {\n      if (parent === parentHost) {\n        return true;\n      }\n      if (parent instanceof ShadowRoot) {\n        parent = parent.host;\n      } else {\n        parent = parent.parentNode;\n      }\n    }\n\n    return false;\n  }\n\n  private handleNotification(event: CustomEvent<{ notification: Notification; host: HTMLElement }>) {\n    const parentHost = event.detail.host;\n    if (event.defaultPrevented) {\n      debug(`[nylas-notification] Event default prevented`);\n      return;\n    }\n    if (parentHost && !this.isChildOf(parentHost)) {\n      debug(`[nylas-notification] Host not a parent`);\n      return;\n    }\n    if (this.ttl === 0) {\n      debug(`[nylas-notification] TTL is 0`);\n      return;\n    }\n    if (this.allowedCategories.length > 0 && !this.allowedCategories.includes(event.detail.notification.category)) {\n      debug(`[nylas-notification] Category not allowed`);\n      return;\n    }\n\n    this.notifications = [...this.notifications, { ...event.detail.notification }];\n    if (event.detail.notification.ttl !== 'none') {\n      const ttl = event.detail.notification.ttl ? event.detail.notification.ttl : (this.ttl as number);\n      window.setTimeout(() => {\n        this.notifications = this.notifications.filter(notif => notif.id !== event.detail.notification.id);\n      }, ttl);\n    }\n  }\n\n  private dismissNotification(id: string) {\n    this.notifications = this.notifications.filter(notif => notif.id !== id);\n  }\n\n  render() {\n    return (\n      <Host>\n        <Fragment>\n          {this.notifications.map(notif => (\n            <div class={`notif ${notif.type}`} key={notif.id}>\n              <div class=\"content\">\n                <span class={`icon ${notif.type}`}>{(notif.type === 'error' || notif.type === 'warning') && <warning-icon />}</span>\n                <span class=\"message\">\n                  <span class=\"title\">{notif.title}</span>\n                  {notif.description && <span class=\"description\">{notif.description}</span>}\n                </span>\n              </div>\n              <button class=\"dismiss-btn\" onClick={() => this.dismissNotification(notif.id)}>\n                <close-icon />\n              </button>\n            </div>\n          ))}\n          <slot />\n        </Fragment>\n      </Host>\n    );\n  }\n}\n"],"version":3}