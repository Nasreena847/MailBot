import{r as e,c as t,h as s,H as i}from"./p-68c2fadf.js";import{R as r}from"./p-ec824acf.js";import{a}from"./p-c6fcb288.js";import"./p-cb65c223.js";const n=":host{display:contents}.container{width:100%;overflow:auto;-webkit-overflow-scrolling:touch}.pull-to-refresh{display:none;border:0;background-color:transparent;text-align:center;width:100%;justify-content:center}.pulling{position:relative;display:flex;margin:0 auto;padding:1rem}.pulling svg{width:24px;height:24px;color:var(--nylas-color-primary-500);transform:rotate(90deg)}.refreshing{position:relative;display:flex;margin:0 auto;padding:1rem}.refreshing svg{width:24px;height:24px;fill:var(--nylas-color-primary-500);animation:rotate 1s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const o=n;var h=undefined&&undefined.__decorate||function(e,t,s,i){var r=arguments.length,a=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,s):i,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)if(n=e[o])a=(r<3?n(a):r>3?n(t,s,a):n(t,s))||a;return r>3&&a&&Object.defineProperty(t,s,a),a};var f=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};const c=class{constructor(s){e(this,s);this.refresh=t(this,"refresh",7);this.threshold=100;this.onTouchStart=e=>{a(`[nylas-threads-refresh] Touch start`,e.touches[0].pageY,this.containerElement?.scrollTop,this.containerElement?.offsetHeight,this.contentElement?.scrollTop);if(this.containerElement?.scrollTop===0){this.start=e.touches[0].pageY}else{this.start=0}};this.onTouchMove=e=>{if(this.start){const t=e.touches[0].pageY-this.start;if(t>this.threshold){this.pulling=true}else{this.pulling=false}}};this.onTouchEnd=e=>{if(this.start){const t=e.changedTouches[0].pageY-this.start;if(t>this.threshold){this.pulling=false;this.refresh.emit({updateState:this.updateState})}this.start=0}};this.start=0;this.state="ready";this.pulling=false;a(`[nylas-threads-refresh] Constructor`);this.updateState=this.updateState.bind(this)}connectedCallback(){}async componentWillLoad(){a(`[nylas-threads-refresh] Component will load`)}componentDidLoad(){a(`[nylas-threads-refresh] Component did load`);this.containerElement?.addEventListener("touchstart",this.onTouchStart);this.containerElement?.addEventListener("touchmove",this.onTouchMove);this.containerElement?.addEventListener("touchend",this.onTouchEnd)}disconnectedCallback(){a(`[nylas-threads-refresh] Component disconnected`);this.containerElement?.removeEventListener("touchstart",this.onTouchStart);this.containerElement?.removeEventListener("touchmove",this.onTouchMove);this.containerElement?.removeEventListener("touchend",this.onTouchEnd)}async updateState(e){this.state=e}render(){return s(i,{key:"0e7150c1fd50e5422e124ac007132ae2ecc0006b"},s("div",{key:"730765ce38847fdbe691f2b9cfeda44e1a46259b",class:"container",ref:e=>this.containerElement=e},s("button",{key:"55427e329f0405960f22f736f10722e620931516",class:{"pull-to-refresh":true,pulling:this.pulling,refreshing:this.state==="loading"},"aria-label":"Refreshing..."},this.state==="loading"&&s("refresh-icon",{slot:"icon"}),this.state!=="loading"&&s("arrow-icon",{slot:"icon"})),s("div",{key:"585886ff635733f5e0398ca9cfe11944860f5a61",class:"content",ref:e=>this.contentElement=e},s("slot",{key:"f61cab9fae1aae81ecb0e7a6544ddb4b845c91b4"}))))}};h([r({name:"nylas-threads-refresh",eventToProps:{refresh:async(e,t)=>{a(`[nylas-threads-refresh] Refreshing threads`);const{updateState:s}=e.detail;await s("loading");await t.threads.getThreads(undefined,"overwrite",false);await s("ready")}},fireRegisterEvent:true}),f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],c.prototype,"render",null);c.style=o;export{c as nylas_threads_refresh};
//# sourceMappingURL=p-8bd26640.entry.js.map