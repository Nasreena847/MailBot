import{r as t,c as s,h as i,a as e}from"./p-68c2fadf.js";const n=':host{display:block;position:relative;--nylas-primary:#2563eb;--nylas-error:#cc4841;--nylas-error-pressed:#992222;--nylas-wraning:#f06c00;--nylas-success:#16a392;--nylas-info:#2b8fc2;--nylas-base-0:#ffffff;--nylas-base-25:#fcfcfd;--nylas-base-50:#f8f9fc;--nylas-base-100:#eaecf5;--nylas-base-200:#d5d9eb;--nylas-base-300:#b3b8d8;--nylas-base-400:#717bbc;--nylas-base-500:#4e5ba6;--nylas-base-600:#3e4784;--nylas-base-700:#263f72;--nylas-base-800:#293056;--nylas-base-900:#101323;--nylas-base-950:#0e101b;--nylas-border-radius:0.25rem;--nylas-border-radius-2x:0.5rem;--nylas-border-radius-3x:0.75rem;--nylas-font-family:"Inter", sans-serif}@media screen and (max-width: 768px){:host{position:unset}}.dropdown{display:inline-block}.dropbtn{color:var(--nylas-base-800);padding:10px;font-size:1rem;font-family:var(--nylas-font-family);cursor:pointer;display:flex;gap:0.5rem;background:transparent;border:none;border-radius:var(--nylas-border-radius-2x);width:50px;padding:14px 16px;border-radius:var(--nylas-border-radius-2x)}.dropbtn.focus{background:transparent}.dropbtn:hover,.dropbtn:active{outline:1px solid var(--nylas-primary)}.dropbtn:active{outline:2px solid var(--nylas-primary)}.dropbtn span.chevron{display:flex;align-self:center}.dropbtn span.open{transform:rotate(90deg)}.dropbtn span.closed{transform:rotate(270deg)}.dropbtn span.selected-option{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:144px;font-size:14px;line-height:20px}@media screen and (max-width: 768px){.dropbtn span.selected-option{max-width:124px;font-size:16px}}.dropdown-content{display:block;margin-top:0.5rem;background-color:var(--nylas-base-0);max-width:306px;width:max-content;max-height:336px;overflow:auto;z-index:1;border-radius:4px;position:absolute;box-shadow:0px 4px 6px -2px rgba(0, 0, 0, 0.05);box-shadow:0px 10px 15px -3px rgba(0, 0, 0, 0.1)}@media screen and (max-width: 768px){.dropdown-content{right:0;width:325px;max-width:unset}}.search-box{border-bottom:1px solid var(--nylas-base-200);padding:10px;position:sticky;top:0;background:var(--nylas-base-0)}.search-box .icon{position:absolute;top:1.25rem;left:1.25rem;color:var(--nylas-base-300)}.dropdown-content ul{padding:0;list-style-type:none;color:var(--nylas-base-900);max-height:336px}.dropdown-content ul li{padding:16px, 12px, 16px, 12px;color:black;padding:12px 16px;text-decoration:none;display:block;font-family:inherit;font-size:14px;font-weight:400;line-height:20px;letter-spacing:0px;text-align:left;cursor:pointer}.dropdown-content ul li:hover,.dropdown-content ul li:focus{background-color:var(--nylas-base-100)}.dropdown-content .selected{background-color:#e7e7e7}input[type=text]{width:-webkit-fill-available;padding:inherit;border:1px solid #ccc;border-radius:4px;position:sticky;background:no-repeat scroll 7px 7px;padding-left:30px;background-size:16px 16px}';const a=n;const o=class{constructor(i){t(this,i);this.inputOptionChanged=s(this,"inputOptionChanged",7);this.name=undefined;this.options=[];this.defaultInputOption=undefined;this.inputValue=undefined;this.pluralizedLabel="";this.filterable=false;this.selectedOption=this.defaultInputOption||null;this.isOpen=false;this.typedValue="";this.filteredOptions=[...this.options];this.ariaActivedescendant="";this.shouldAutoScroll=false}optionsChangedHandler(t,s){if(t===s){return}this.filteredOptions=this.getFilteredOptions(t)}defaultSelectedOptionChangedHandler(t,s){if(t?.label===s?.label){return}this.selectedOption=t}inputValueChangedHandler(t,s){if(t===s){return}this.filteredOptions=this.getFilteredOptions(this.options)}componentWillLoad(){this.filteredOptions=this.getFilteredOptions(this.options);if(!this.selectedOption&&!!this.defaultInputOption){this.selectedOption=this.defaultInputOption}if(!this.selectedOption&&this.options.length>0){this.selectedOption=this.options[0]}}getFilteredOptions(t){if(!this.filterable){return t}return t.filter((t=>t?.value?.toString().toLowerCase().includes(this.typedValue?.toLowerCase())||t?.label?.toLowerCase().includes(this.typedValue?.toLowerCase())))}toggleDropdown(){this.isOpen=!this.isOpen}selectOption(t){this.selectedOption=t;this.toggleDropdown();this.inputOptionChanged.emit({value:t.value,name:this.name})}handleOnInput(t){const s=t.target.value;this.typedValue=s;const i=this.options.findIndex((t=>t.label.toLowerCase().includes(s.toLowerCase())));if(i>-1){this.scrollToViewWithinParent(i)}this.inputOptionChanged.emit({value:s,name:this.name})}scrollToViewWithinParent(t){const s=this.options[t];const i=this.el.shadowRoot?.getElementById(s.value.toString());const e=this.optionsRef;this.ariaActivedescendant=s.value.toString();if(!i||!e)return;const n=i.getBoundingClientRect();const a=e.getBoundingClientRect();if(n.top<a.top){e.scrollTop-=a.top-n.top}else if(n.bottom>a.bottom){e.scrollTop+=n.bottom-a.bottom}}handleSelectButtonKeyDown(t){switch(t.key){case"ArrowDown":case"Enter":t.preventDefault();if(!this.isOpen){this.toggleDropdown()}this.inputRef?.focus();break;case"Escape":this.isOpen=false;break}}handleClick(t){if(this.isOpen){const s=t.target.value;const i=this.options.findIndex((t=>t.label.toLowerCase().includes(s.toLowerCase())));if(i>-1){setTimeout((()=>{this.scrollToViewWithinParent(i)}),10)}}}handleListboxKeydown(t){const s=this.filteredOptions;const i=s.findIndex((t=>t.value===this.ariaActivedescendant));if(t.key==="ArrowDown"||t.key==="Tab"&&!t.shiftKey){t.preventDefault();if(i===s.length-1){this.ariaActivedescendant="";this.inputRef?.focus();return}const e=i+1<s.length?i+1:0;this.ariaActivedescendant=s[e].value;this.focusOption(e)}else if(t.key==="ArrowUp"||t.key==="Tab"&&t.shiftKey){t.preventDefault();if(i===0){this.ariaActivedescendant="";this.inputRef?.focus();return}const e=i-1>=0?i-1:s.length-1;this.ariaActivedescendant=s[e].value;this.focusOption(e)}else if(t.key==="Enter"){t.preventDefault();if(this.ariaActivedescendant){this.selectOption(s[i])}}else if(t.key==="Escape"){this.isOpen=false}}focusOption(t){const s=this.filteredOptions[t];if(!s)return;const i=s.value;const e=this.el.shadowRoot?.getElementById(i);if(e){e.focus();e.scrollIntoView({behavior:"smooth",block:"nearest"})}}handleComboboxKeyDown(t){if(t.key==="ArrowDown"||t.key=="Tab"&&!t.shiftKey){t.preventDefault();if(!this.isOpen){this.isOpen=true;this.shouldAutoScroll=true;return}this.ariaActivedescendant=this.filteredOptions[0].value;this.focusOption(0)}else if(t.key==="ArrowUp"||t.key==="Tab"&&t.shiftKey){t.preventDefault();this.ariaActivedescendant=this.filteredOptions[this.filteredOptions.length-1].value;this.focusOption(this.filteredOptions.length-1)}else if(t.key==="Escape"){this.isOpen=false}}handleOutsideClick(t){const s=t.composedPath();const i=s.includes(this.el);if(!i&&this.isOpen){this.isOpen=false}}render(){return i("div",{key:"fa0347bf09ec791976c3628837a400ffce06f785",class:"dropdown",part:"id_dropdown"},i("input",{key:"d18704609aa859f705397ca57a0d491a8f09ed99",type:"text",name:this.name,id:this.name,part:"id_dropdown-input",class:{dropbtn:true,open:this.isOpen},value:this.inputValue,onClick:t=>{this.toggleDropdown();this.shouldAutoScroll=true;this.handleClick(t)},"aria-haspopup":"listbox","aria-label":this.name,"aria-expanded":this.isOpen?"true":"false",onKeyDown:t=>this.handleComboboxKeyDown(t),onInput:t=>this.handleOnInput(t)}),this.isOpen?i("div",{class:"dropdown-content",part:"id_dropdown-content",ref:t=>this.optionsRef=t},i("ul",{tabindex:"-1",role:"listbox","aria-label":this.name,"aria-activedescendant":this.ariaActivedescendant,onKeyDown:t=>this.handleListboxKeydown(t)},this.filteredOptions.map((t=>i("li",{tabindex:"0",key:t.value,id:t.value,onClick:()=>this.selectOption(t),role:"option",class:{focused:this.ariaActivedescendant===t.value.toString()}},t.labelHTML?t.labelHTML:t.label))))):null)}get el(){return e(this)}static get watchers(){return{options:["optionsChangedHandler"],defaultInputOption:["defaultSelectedOptionChangedHandler"],inputValue:["inputValueChangedHandler"]}}};o.style=a;export{o as input_dropdown};
//# sourceMappingURL=p-42d3ae92.entry.js.map