import{r as t,c as i,h as s,H as e,a as n}from"./p-68c2fadf.js";import{P as r,Q as a,R as h,S as o,T as c}from"./p-c6fcb288.js";import{c as l}from"./p-cb65c223.js";var f={exports:{}};(function(t,i){!function(i,s){t.exports=s()}(l,(function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,e=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,r={},a=function(t){return(t=+t)+(t>68?1900:2e3)};var h=function(t){return function(i){this[t]=+i}},o=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var i=t.match(/([+-]|\d\d)/g),s=60*i[1]+(+i[2]||0);return 0===s?0:"+"===i[0]?-s:s}(t)}],c=function(t){var i=r[t];return i&&(i.indexOf?i:i.s.concat(i.f))},l=function(t,i){var s,e=r.meridiem;if(e){for(var n=1;n<=24;n+=1)if(t.indexOf(e(n,0,i))>-1){s=n>12;break}}else s=t===(i?"pm":"PM");return s},f={A:[n,function(t){this.afternoon=l(t,!1)}],a:[n,function(t){this.afternoon=l(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[s,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[e,h("seconds")],ss:[e,h("seconds")],m:[e,h("minutes")],mm:[e,h("minutes")],H:[e,h("hours")],h:[e,h("hours")],HH:[e,h("hours")],hh:[e,h("hours")],D:[e,h("day")],DD:[s,h("day")],Do:[n,function(t){var i=r.ordinal,s=t.match(/\d+/);if(this.day=s[0],i)for(var e=1;e<=31;e+=1)i(e).replace(/\[|\]/g,"")===t&&(this.day=e)}],M:[e,h("month")],MM:[s,h("month")],MMM:[n,function(t){var i=c("months"),s=(c("monthsShort")||i.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(s<1)throw new Error;this.month=s%12||s}],MMMM:[n,function(t){var i=c("months").indexOf(t)+1;if(i<1)throw new Error;this.month=i%12||i}],Y:[/[+-]?\d+/,h("year")],YY:[s,function(t){this.year=a(t)}],YYYY:[/\d{4}/,h("year")],Z:o,ZZ:o};function d(s){var e,n;e=s,n=r&&r.formats;for(var a=(s=e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(i,s,e){var r=e&&e.toUpperCase();return s||n[e]||t[e]||n[r].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,i,s){return i||s.slice(1)}))}))).match(i),h=a.length,o=0;o<h;o+=1){var c=a[o],l=f[c],d=l&&l[0],u=l&&l[1];a[o]=u?{regex:d,parser:u}:c.replace(/^\[|\]$/g,"")}return function(t){for(var i={},s=0,e=0;s<h;s+=1){var n=a[s];if("string"==typeof n)e+=n.length;else{var r=n.regex,o=n.parser,c=t.slice(e),l=r.exec(c)[0];o.call(i,l),t=t.replace(l,"")}}return function(t){var i=t.afternoon;if(void 0!==i){var s=t.hours;i?s<12&&(t.hours+=12):12===s&&(t.hours=0),delete t.afternoon}}(i),i}}return function(t,i,s){s.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(a=t.parseTwoDigitYear);var e=i.prototype,n=e.parse;e.parse=function(t){var i=t.date,e=t.utc,a=t.args;this.$u=e;var h=a[1];if("string"==typeof h){var o=!0===a[2],c=!0===a[3],l=o||c,f=a[2];c&&(f=a[2]),r=this.$locale(),!o&&f&&(r=s.Ls[f]),this.$d=function(t,i,s){try{if(["x","X"].indexOf(i)>-1)return new Date(("X"===i?1e3:1)*t);var e=d(i)(t),n=e.year,r=e.month,a=e.day,h=e.hours,o=e.minutes,c=e.seconds,l=e.milliseconds,f=e.zone,u=new Date,m=a||(n||r?1:u.getDate()),p=n||u.getFullYear(),b=0;n&&!r||(b=r>0?r-1:u.getMonth());var y=h||0,v=o||0,x=c||0,g=l||0;return f?new Date(Date.UTC(p,b,m,y,v,x,g+60*f.offset*1e3)):s?new Date(Date.UTC(p,b,m,y,v,x,g)):new Date(p,b,m,y,v,x,g)}catch(t){return new Date("")}}(i,h,e),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),l&&i!=this.format(h)&&(this.$d=new Date("")),r={}}else if(h instanceof Array)for(var u=h.length,m=1;m<=u;m+=1){a[1]=h[m-1];var p=s.apply(this,a);if(p.isValid()){this.$d=p.$d,this.$L=p.$L,this.init();break}m===u&&(this.$d=new Date(""))}else n.call(this,t)}}}))})(f);const d=f.exports;const u=':host{display:block;position:relative;--nylas-primary:#2563eb;--nylas-error:#cc4841;--nylas-error-pressed:#992222;--nylas-wraning:#f06c00;--nylas-success:#16a392;--nylas-info:#2b8fc2;--nylas-base-0:#ffffff;--nylas-base-25:#fcfcfd;--nylas-base-50:#f8f9fc;--nylas-base-100:#eaecf5;--nylas-base-200:#d5d9eb;--nylas-base-300:#b3b8d8;--nylas-base-400:#717bbc;--nylas-base-500:#4e5ba6;--nylas-base-600:#3e4784;--nylas-base-700:#263f72;--nylas-base-800:#293056;--nylas-base-900:#101323;--nylas-base-950:#0e101b;--nylas-border-radius:0.25rem;--nylas-border-radius-2x:0.5rem;--nylas-border-radius-3x:0.75rem;--nylas-font-family:"Inter", sans-serif}.time-picker{display:inline-block;width:150px;font-family:var(--nylas-font-family);position:relative}@media screen and (max-width: 768px){.time-picker{width:auto}}.time-picker input{width:150px;height:48px;text-align:center;font-size:16px;font-family:inherit;cursor:pointer;background:transparent;border:1px solid var(--nylas-base-200);border-radius:var(--nylas-border-radius-2x)}@media screen and (max-width: 768px){.time-picker input{width:88px}}@media screen and (max-width: 504px){.time-picker input{width:68px;font-size:15px}}.time-picker input.focus{background:transparent}.time-picker input:hover,.time-picker input:active{border:1px solid var(--nylas-primary)}.time-picker input:active{outline:2px solid var(--nylas-primary)}.time-picker input span.open{transform:rotate(90deg)}.time-picker input span.closed{transform:rotate(270deg)}.time-picker input.error{border:1px solid var(--nylas-error)}.time-picker p.error{color:var(--nylas-error);font-size:0.875rem;margin:0}.times{display:block;margin-top:0.5rem;background-color:var(--nylas-base-0);width:100%;max-height:336px;overflow:auto;border:1px solid #ddd;z-index:1;border-radius:4px;position:absolute;box-shadow:0px 4px 6px -2px rgba(0, 0, 0, 0.0509803922);box-shadow:0px 10px 15px -3px rgba(0, 0, 0, 0.1019607843)}.times ul{padding:0;list-style-type:none;color:var(--nylas-base-900);max-height:336px}.times ul li{padding:16px, 12px, 16px, 12px;color:black;padding:12px 16px;text-decoration:none;display:block;font-family:inherit;font-size:14px;font-weight:400;line-height:20px;letter-spacing:0px;text-align:center;cursor:pointer}.times ul li.focused{background-color:var(--nylas-base-100)}.times ul li:hover,.times ul li:focus{background-color:var(--nylas-base-100)}.times ul li label{display:flex;align-items:center;gap:0.5rem}.times ul li label input{margin:0}';const m=u;r.extend(d);const p=class{constructor(s){t(this,s);this.timeChange=i(this,"timeChange",7);this.formError=i(this,"formError",7);this.time=undefined;this.minimumStartTime=null;this.placeholder="hh:mmam/pm";this.name=undefined;this.hasError=false;this.err="";this.showTimes=false;this.ariaActivedescendant="";this.times=this.generateTimes();this.shouldAutoScroll=false}handleOutsideClick(t){const i=t.composedPath();const s=i.includes(this.el);if(!s&&this.showTimes){this.showTimes=false}}minimumStartTimeChangedHandler(){if(this.minimumStartTime){let t=r().hour(parseInt(this.minimumStartTime)).minute(parseInt(this.minimumStartTime.slice(-4,-2)));if(this.minimumStartTime.slice(-2).toLowerCase()==="pm"&&parseInt(this.minimumStartTime)!==12){t=t.add(12,"hour")}else if(this.minimumStartTime.slice(-2).toLowerCase()==="am"&&parseInt(this.minimumStartTime)===12){t=t.subtract(12,"hour")}this.times=this.generateTimes();const i=r(this.times[0].value,"hh:mma");let s=r(this.time,"hh:mma");if(s.isBefore(i)){this.err="Invalid";this.formError.emit({key:this.el.id,message:"Invalid"})}}}componentDidRender(){if(this.showTimes&&this.shouldAutoScroll){const t=a(this.time);const i=this.times.findIndex((i=>i.value===t));if(i>-1){this.shouldAutoScroll=false;this.scrollToViewWithinParent(i)}return}}handleTimeChange(t,i){const s=i.split(":");if(s[0]==="00"&&s[1].slice(-2)=="pm"){this.err="Invalid";this.formError.emit({key:this.el.id,message:"Invalid"})}if(!h(i)){this.err="Invalid";this.formError.emit({key:this.el.id,message:"Invalid"})}else{this.err="";this.formError.emit({key:this.el.id,message:""})}this.timeChange.emit({key:this.el.id,value:i})}handleTimeAutocomplete(t){const i=t.target?.value;if(!h(i)){this.err="Invalid";this.formError.emit({key:this.el.id,message:"Invalid"});return}if(i===""){const t=o().format("hh:mma");this.timeChange.emit({key:this.el.id,value:t});return}if(!c(i)){const t=a(i);this.timeChange.emit({key:this.el.id,value:t});return}this.timeChange.emit({key:this.el.id,value:i})}handleOnInput(t){const i=t.target?.value;if(!h(i)){return}if(i===""){const t=o().format("hh:mma");const i=this.times.findIndex((i=>i.value===t));if(i>-1){this.scrollToViewWithinParent(i)}return}if(!c(i)){const t=a(i);const s=this.times.findIndex((i=>i.value===t));if(s>-1){this.scrollToViewWithinParent(s)}return}}generateTimes(){const t=[];let i=r().set("hour",0).set("minute",0).set("second",0);if(this.minimumStartTime){i=r(this.minimumStartTime,"hh:mma")}const s=i.endOf("day").diff(i,"minutes");const e=Math.round(s/15);for(let s=0;s<e+1;s++){const n=i.add(s*15,"minute");if(s==e&&n.format("hh:mma").includes("am")){break}t.push({id:s,value:n.format("hh:mma")})}return t}handleComboboxKeyDown(t){if(t.key==="ArrowDown"){t.preventDefault();if(!this.showTimes){this.showTimes=true;this.shouldAutoScroll=true;return}if(this.ariaActivedescendant===""){this.ariaActivedescendant=this.times[0].id.toString();this.focusOption(0)}else{const t=this.times.findIndex((t=>t.id.toString()===this.ariaActivedescendant));const i=t+1<this.times.length?t+1:0;this.ariaActivedescendant=this.times[i].id.toString();this.focusOption(i)}}else if(t.key==="ArrowUp"){t.preventDefault();if(this.ariaActivedescendant===""){this.ariaActivedescendant=this.times[this.times.length-1].id.toString();this.focusOption(this.times.length-1)}else{const t=this.times.findIndex((t=>t.id.toString()===this.ariaActivedescendant));const i=t-1>=0?t-1:this.times.length-1;this.ariaActivedescendant=this.times[i].id.toString();this.focusOption(i)}}else if(t.key==="Escape"){this.showTimes=false;this.timeInput.focus()}}handleListboxKeydown(t){const i=this.times;const s=i.findIndex((t=>t.id.toString()===this.ariaActivedescendant));if(t.key==="ArrowDown"||t.key==="Tab"&&!t.shiftKey){t.preventDefault();const e=s+1<i.length?s+1:0;this.ariaActivedescendant=i[e].id.toString();this.focusOption(e)}else if(t.key==="ArrowUp"||t.key==="Tab"&&t.shiftKey){t.preventDefault();const e=s-1>=0?s-1:i.length-1;this.ariaActivedescendant=i[e].id.toString();this.focusOption(e)}else if(t.key==="Enter"){t.preventDefault();if(this.ariaActivedescendant){const e=i[s];this.handleTimeChange(t,e.value);this.showTimes=false;this.ariaActivedescendant="";this.timeInput.focus()}}else if(t.key==="Escape"){this.showTimes=false;this.timeInput.focus()}}scrollToViewWithinParent(t){const i=this.times[t];const s=this.el.shadowRoot?.getElementById(i.id.toString());const e=this.timeMenu;this.ariaActivedescendant=i.id.toString();const n=s.getBoundingClientRect();const r=e.getBoundingClientRect();if(n.top<r.top){e.scrollTop-=r.top-n.top}else if(n.bottom>r.bottom){e.scrollTop+=n.bottom-r.bottom}if(n.left<r.left){e.scrollLeft-=r.left-n.left}else if(n.right>r.right){e.scrollLeft+=n.right-r.right}}focusOption(t){const i=this.times[t];if(!i)return;const s=i.id.toString();const e=this.el.shadowRoot?.getElementById(s);if(e){e.focus();e.scrollIntoView({behavior:"smooth",block:"nearest"})}}render(){return s(e,{key:"efbf43a69aaa2bb323ca70eba72dec4245b8e103"},s("div",{key:"0a366760ae64c61e4b61f973f8fe1150f2c4ec33",class:"time-picker",part:"time-picker"},s("input",{key:"21c71cd1390364c13c9e7c72c5cd975df42b9c52",type:"text",name:this.name,id:this.name,part:"time-input",class:{"time-input":true,error:!!this.err||this.hasError},ref:t=>this.timeInput=t,value:this.time,onClick:()=>{this.showTimes=!this.showTimes;this.shouldAutoScroll=true},"aria-haspopup":"listbox","aria-label":this.name,"aria-expanded":this.showTimes?"true":"false",placeholder:this.placeholder,onKeyDown:t=>this.handleComboboxKeyDown(t),onInput:t=>this.handleOnInput(t),onBlur:t=>this.handleTimeAutocomplete(t)}),this.err&&s("div",{class:"invalid-time-icon"}),this.showTimes&&s("div",{class:"times",part:"times",ref:t=>this.timeMenu=t},s("ul",{tabindex:"-1",role:"listbox","aria-label":this.name,"aria-activedescendant":this.ariaActivedescendant,onKeyDown:t=>this.handleListboxKeydown(t)},this.times.map((t=>s("li",{tabindex:"0",key:t.id,id:t.id.toString(),class:{focused:this.ariaActivedescendant===t.id.toString()},onClick:i=>{this.handleTimeChange(i,t.value);this.showTimes=false;this.timeInput.focus()},role:"option"},`${t.value}`))))),!this.showTimes&&this.err&&s("p",{class:"error",id:"email-error"},this.err)))}get el(){return n(this)}static get watchers(){return{minimumStartTime:["minimumStartTimeChangedHandler"]}}};p.style=m;export{p as nylas_time_window_picker};
//# sourceMappingURL=p-669aa026.entry.js.map